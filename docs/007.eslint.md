# ESLint

- [ESLint](https://eslint.org)
- [JavaScript Standard Style](https://standardjs.com)
  - [standard/standard](https://github.com/standard/standard)
  - [standard/eslint-config-standard](https://github.com/standard/eslint-config-standard)
- [Airbnb JavaScript Style Guide](https://github.com/airbnb/javascript): airbnb/javascript
- [Google JavaScript Style Guide](https://google.github.io/styleguide/jsguide.html)
  - [google/eslint-config-google](https://github.com/google/eslint-config-google)


## Semicolons VS No Semicolons

- [Never Use Semicolons](https://feross.org/never-use-semicolons/)

## Koa

[koajs/eslint-config-koa](https://github.com/koajs/eslint-config-koa)
- JavaScript Standard Style 기반

### 모듈 설치

최상위 프로젝트 폴더에서 eslint를 추가한다.

```bash
yarn add --dev eslint
yarn add --dev eslint-config-koa eslint-config-standard eslint-plugin-standard eslint-plugin-promise eslint-plugin-import eslint-plugin-node
```

### ESLint 초기화

ESLint를 실행한다.

```bash
./node_modules/.bin/eslint --init

? How would you like to use ESLint? To check syntax, find problems, and enforce code style
? What type of modules does your project use? ommonJS (require/exports)
? Which framework does your project use? None of these
? Where does your code run? ◉ Node
? How would you like to define a style for your project? Use a popular style guide
? Which style guide do you want to follow? Standard (https://github.com/standard/standard)
? What format do you want your config file to be in? JSON
? Would you like to install them now with npm? (Y/n) Y

Successfully created .eslintrc.json file
```

### .eslintrc 수정

`.eslintrc.json` 파일이 생성되었다. extends에 koa를 추가한다.

```json
{
  "extends": [
    "standard",
    "koa"
  ]
}
```

이밖에도 자신에게 알맞는 규칙으로 수정한다.

### .eslintignore

`.eslintignore`를 생성해서 `client` 폴더는 다른 ESLint 설정을 사용하도록 한다.

```text
client/
```

### package.json

`yarn lint` 명령어로 lint 검사를 할 수 있다.

```json
{
  "scripts": {
    "lint": "./node_modules/.bin/eslint ./**/*.js"
  }
}
```

## React

### 모듈 설치

이미 ESLint가 설치되어있지만 업그레이드가 필요하다.

```bash
cd client
yarn add --dev eslint
```

[yannickcr/eslint-plugin-react](https://github.com/yannickcr/eslint-plugin-react)

```bash
yarn add --dev eslint-plugin-react
```

### ESLint 초기화

ESLint를 실행한다.

```bash
./node_modules/.bin/eslint --init

? How would you like to use ESLint? To check syntax, find problems, and enforce code style
? What type of modules does your project use? JavaScript modules (import/export)
? Which framework does your project use? React
? Where does your code run? ◉ Browser
? How would you like to define a style for your project? Use a popular style guide
? Which style guide do you want to follow? Standard (https://github.com/standard/standard)
? What format do you want your config file to be in? JSON
? Would you like to install them now with npm? Y

Successfully created .eslintrc.json file
```

### .eslintrc 수정

`.eslintrc.json` 파일이 생성되었다.

추가 수정
1. extends: "plugin:react/recommended"
1. rules: "react/jsx-uses-react": "error", "react/jsx-uses-vars": "error"
1. settings: { react, propWrapperFunctions, linkComponents }


```json
{
  "env": {
      "browser": true,
      "es6": true,
      "jest": true
  },
  "extends": [
    "standard",
    "plugin:react/recommended"
  ],
  "rules": {
    "react/jsx-uses-react": "error",
    "react/jsx-uses-vars": "error"
  }
}
```

이밖에도 자신에게 알맞는 규칙으로 수정한다.

- [List of supported rules](https://github.com/yannickcr/eslint-plugin-react#list-of-supported-rules)

### .eslintignore

`.eslintignore`를 생성해서 `src` 폴더는 ESLint 설정을 사용하도록 한다.

```text
!src/
```

### package.json

`yarn lint` 명령어로 lint 검사를 할 수 있다.

***주의*** `./**/*.js`가 아닌 `./src/**/*.js`로 한다.

```json
{
  "scripts": {
    "lint": "./node_modules/.bin/eslint ./src/**/*.js"
  }
}
```

### ESLint 사용

`yarn lint` 명령어로 소스코드를 검사한다.

```bash
yarn lint

client/src/App.js
  1:51  error  Extra semicolon                            semi
  3:13  error  Missing space before function parentheses  space-before-function-paren
# ... 생략

✖ 57 problems (57 errors, 0 warnings)
  57 errors and 0 warnings potentially fixable with the `--fix` option.
```

Standard 스타일을 적용한다면 에러 대부분이 새미콜론 에러다.

`--fix` 옵션으로 한번에 수정한다.

```bash
yarn lint --fix

✨  Done in 1.28s.
```
